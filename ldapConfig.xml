<?xml version="1.0" encoding="UTF-8" ?>
<ldap_config>
  <url>ldap://127.0.0.1:389/</url>
  <user>uid=admin,ou=admins,dc=schub,dc=de</user>
  <password>secret</password>
  <context>ou=users,dc=schub,dc=de</context>
  <interval>DAILY</interval>
  <read_only>true</read_only>
  <subtree_search>true</subtree_search>
  <sync_on_start>true</sync_on_start>
  <object_classes>
    <class>person</class>
    <class>inetOrgPerson</class>
  </object_classes>
  <org_units>
    <unit>ou=users,dc=schub,dc=de</unit>
  </org_units>
  <endpoint>
    <type>shindig-graph</type>
    <create_own_entries>true</create_own_entries>
    <delete_own_entries>false</delete_own_entries>
    <create_ldap_entries>false</create_ldap_entries>
    <delete_ldap_entries>false</delete_ldap_entries>
    <properties>
      <user>admin</user>
      <host>http://127.0.0.1:8080/shindig/</host>
      <fields>id,name,displayName,organizations,thumbnailUrl,emails,phoneNumbers</fields>
      <pic-folder>/home/user/pictures/</pic-folder>
      <pic-url>http://127.0.0.1:8080/pictures/</pic-url>
    </properties>
    <mapping>
      <!--LDAP to Shindig rules-->
      <rule>
        <ldap_property>uid</ldap_property>
        <end_point_property>id</end_point_property>
        <direction>FROM_LDAP</direction>
        <operation>COPY</operation>
      </rule>
      <rule>
        <ldap_property>cn</ldap_property>
        <end_point_property>name.formatted</end_point_property>
        <direction>FROM_LDAP</direction>
        <operation>COPY</operation>
      </rule>
      <rule>
        <ldap_property>cn</ldap_property>
        <end_point_property>displayName</end_point_property>
        <direction>FROM_LDAP</direction>
        <operation>COPY</operation>
      </rule>
      <rule>
        <ldap_property>givenName</ldap_property>
        <end_point_property>name.givenName</end_point_property>
        <direction>FROM_LDAP</direction>
        <operation>COPY</operation>
      </rule>
      <rule>
        <ldap_property>sn</ldap_property>
        <end_point_property>name.familyName</end_point_property>
        <direction>FROM_LDAP</direction>
        <operation>COPY</operation>
      </rule>
      <!--new attributes-->
      <rule>
        <ldap_property>jpegPhoto</ldap_property>
        <end_point_property>thumbnail</end_point_property>
        <direction>FROM_LDAP</direction>
        <operation>COPY</operation>
      </rule>
      <rule>
        <ldap_property>mail</ldap_property>
        <end_point_property>emails</end_point_property>
        <direction>FROM_LDAP</direction>
        <operation>COPY</operation>
      </rule>
      <rule>
        <ldap_property>telephoneNumber</ldap_property>
        <end_point_property>phoneNumbers</end_point_property>
        <direction>FROM_LDAP</direction>
        <operation>COPY</operation>
      </rule>
      <rule>
        <ldap_property>roomNumber</ldap_property>
        <end_point_property>org_location</end_point_property>
        <direction>FROM_LDAP</direction>
        <operation>COPY</operation>
      </rule>
      <rule>
        <ldap_property>physicalDeliveryOfficeName</ldap_property>
        <end_point_property>org_site</end_point_property>
        <direction>FROM_LDAP</direction>
        <operation>COPY</operation>
      </rule>
      <rule>
        <ldap_property>title</ldap_property>
        <end_point_property>job_title</end_point_property>
        <direction>FROM_LDAP</direction>
        <operation>COPY</operation>
      </rule>
      <!-- extended model properties -->
      <rule>
        <ldap_property>manager</ldap_property>
        <end_point_property>managerId</end_point_property>
        <direction>FROM_LDAP</direction>
        <operation>COPY</operation>
      </rule>
      <rule>
        <ldap_property>secretary</ldap_property>
        <end_point_property>secretary</end_point_property>
        <direction>FROM_LDAP</direction>
        <operation>COPY</operation>
      </rule>
      <rule>
        <ldap_property>departmentNumber</ldap_property>
        <end_point_property>department</end_point_property>
        <direction>FROM_LDAP</direction>
        <operation>COPY</operation>
      </rule>
      <rule>
        <ldap_property>ou</ldap_property>
        <end_point_property>orgUnit</end_point_property>
        <direction>FROM_LDAP</direction>
        <operation>COPY</operation>
      </rule>
      <!-- department head flag does not exist -->
      <!--general attriutes copied on creation-->
      <rule>
        <ldap_property>uid</ldap_property>
        <end_point_property>id</end_point_property>
        <direction>BOTH</direction>
        <operation>COPY_ON_CREATE</operation>
      </rule>
      <rule>
        <ldap_property>cn</ldap_property>
        <end_point_property>name.formatted</end_point_property>
        <direction>BOTH</direction>
        <operation>COPY_ON_CREATE</operation>
      </rule>
      <rule>
        <ldap_property>cn</ldap_property>
        <end_point_property>displayName</end_point_property>
        <direction>BOTH</direction>
        <operation>COPY_ON_CREATE</operation>
      </rule>
      <rule>
        <ldap_property>givenName</ldap_property>
        <end_point_property>name.givenName</end_point_property>
        <direction>BOTH</direction>
        <operation>COPY_ON_CREATE</operation>
      </rule>
      <rule>
        <ldap_property>sn</ldap_property>
        <end_point_property>name.familyName</end_point_property>
        <direction>BOTH</direction>
        <operation>COPY_ON_CREATE</operation>
      </rule>
    </mapping>
  </endpoint>
  <!--test end point printing LDAP user info-->
  <!--
  <endpoint>
    <type>test</type>
    <create_own_entries>false</create_own_entries>
    <delete_own_entries>false</delete_own_entries>
    <create_ldap_entries>false</create_ldap_entries>
    <delete_ldap_entries>false</delete_ldap_entries>
    <properties>
      
    </properties>
    <rules>
      
    </rules>
  </endpoint>
  -->
</ldap_config>
